# vulnerability-management
Notes from DevSecOps ch.4 Vulnerability Management

As we make use of an array of tools for vulnerability scanning, it becomes important to have a way to easily process and visualize the findings
-> vulnerability management tools exist for this purpose eg. DefectDojo

DefectDojo requires:
- findings in files
- tool running in browser
- feed report files to the tool (interprets security report types produced from each scan tool)

DefectDojo allows you to:
- visualise scanning reports from many different tools
- can enhance findings data and train it to reduce false positives, dig and discover patterns
- bidirectional handling of findings ie. can pull from scan tool and push reports to Jira
- customisation and flexibility over process to fit different organisation needs. The hierarchy follows the pattern: Produce Type > Products > Engagements (versions) > Tests > Findings

The setup would have following steps: 
1. Configure scan tools to generate report file as artifacts
<img width="514" alt="Capture d’écran 2024-05-14 à 21 18 57" src="https://github.com/JulienAvezou/vulnerability-management/assets/62488871/87f40415-3282-48f9-900f-8a3a47d1e037">
<img width="361" alt="Capture d’écran 2024-05-14 à 21 19 02" src="https://github.com/JulienAvezou/vulnerability-management/assets/62488871/95c25a43-442f-4ec5-80dc-cbae48dd6716">

3. Download the report files as artifacts from the pipeline
<img width="1175" alt="Capture d’écran 2024-05-14 à 21 21 09" src="https://github.com/JulienAvezou/vulnerability-management/assets/62488871/30a214da-37e0-4047-a301-6ad68ea4efa3">
<img width="210" alt="Capture d’écran 2024-05-14 à 21 23 09" src="https://github.com/JulienAvezou/vulnerability-management/assets/62488871/21abc250-5f14-4574-a592-186a4b348354">

5. Run DefectDojo in browser (can make use of free to use demo tool provided by DefectDojo)
<img width="1429" alt="Capture d’écran 2024-05-14 à 21 28 07" src="https://github.com/JulienAvezou/vulnerability-management/assets/62488871/5fbc4288-e18d-40a8-880a-99939d4995d8">

6. Import findings into DefectDojo
<img width="1440" alt="Capture d’écran 2024-05-15 à 22 02 36" src="https://github.com/JulienAvezou/vulnerability-management/assets/62488871/4afd5e46-d05e-4e4f-801d-1574b7f460b9">

7. Visualize the findings and sort them
- can sort them by CWE (Common Weakness Enumeration) with links to each CWE that itself relates to OWASP Top 10
<img width="1348" alt="Capture d’écran 2024-05-15 à 22 19 23" src="https://github.com/JulienAvezou/vulnerability-management/assets/62488871/dd87eb49-3d0b-44f9-b2b0-98221e11e1b4">
<img width="1423" alt="Capture d’écran 2024-05-15 à 22 22 50" src="https://github.com/JulienAvezou/vulnerability-management/assets/62488871/6e1818a2-e2ae-4081-8408-33f09e572b7a">

8. Based on findings you can educate engineers on these processed findings in your company so that they can be proactive on fixing them

We can write a Python script to automate uploading security scan results to DefectDojo
For script to work:
- need API key to integrate with DefectDojo
- need to know the API specs of DefectDojo
<img width="631" alt="Capture d’écran 2024-05-26 à 11 56 13" src="https://github.com/JulienAvezou/vulnerability-management/assets/62488871/25fa80a3-6455-49da-9f03-c41c17411c49">

<img width="631" alt="Capture d’écran 2024-05-26 à 11 56 13" src="https://github.com/JulienAvezou/vulnerability-management/assets/62488871/61f4513a-eba9-41fe-b302-8c49c180a6a8">

We can then include this script in the pipeline jobs
<img width="266" alt="Capture d’écran 2024-05-27 à 21 17 39" src="https://github.com/JulienAvezou/vulnerability-management/assets/62488871/17149f1c-404f-4b3d-8eff-7e793546a0b8">

Note: when create artifact in gitlbas pipeline and in following job, it downloads artifacts from previously completed jobs

We will now extend the script to accept multiple file names so we can upload various file scan reports:
<img width="510" alt="Capture d’écran 2024-05-27 à 21 41 06" src="https://github.com/JulienAvezou/vulnerability-management/assets/62488871/233f4316-f520-4f86-a35f-ecb61d9c4392">
<img width="357" alt="Capture d’écran 2024-05-27 à 21 40 44" src="https://github.com/JulienAvezou/vulnerability-management/assets/62488871/510a1c5a-68cc-4175-9dc0-228b37e50738">

<img width="872" alt="Capture d’écran 2024-05-27 à 22 14 02" src="https://github.com/JulienAvezou/vulnerability-management/assets/62488871/a1ea39b1-f6d4-433a-8b2a-324e0848758c">
<img width="446" alt="Capture d’écran 2024-05-27 à 22 14 13" src="https://github.com/JulienAvezou/vulnerability-management/assets/62488871/8d95173b-ce99-449b-b5a5-7664bcef6800">

